<!-- build time:Sat Jan 12 2019 09:33:20 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="boxi"><meta name="google-site-verification" content="iOm73y6vS5qme_s6tWGOVE1l5iATBiNi7Ye7J4dv68g"><meta name="baidu-site-verification" content="9BXA7j00i6"><title>boxi's box</title><meta name="description" content="A Blog Powered By Hexo"><meta name="keywords" content="咔擦 by boxi"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/img/favicon.png" type="image/x-icon"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><style>#cnzz_stat_icon_1274080808{display:none}body,html{margin:0;padding:0}.main{width:100%;overflow:hidden}.image_box{display:block;max-width:600px;margin:0 auto;padding-bottom:20px;padding-bottom:20px}.title{margin:0 auto;text-align:left;background:#FFF;padding:15px 10px}.subtitle{font-weight:200;font-size:14px;color:#999;margin:0;margin-bottom:6px}.p_desc{font-weight:400;color:#101010;font-size:18px;margin:0}.img-wrap{max-width:100%;height:auto;min-height:200px;background:linear-gradient(to right,#ececf0 8%,#d3d3d9 50%,#ececf0 100%);-webkit-animation:shine 2s infinite;animation:shine 2s infinite}.gallery{text-align:center;margin-top:70px}.gallery-img{max-width:100%;cursor:-webkit-zoom-in}.header{position:fixed;width:100%;height:50px;border-bottom:1px solid rgba(0,0,0,.0975);background-color:#FFF}.logo{max-width:600px;margin:0 auto;height:50px}.logo_img{display:inline-block;width:26px;height:50px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAADDElEQVRoQ+2YS6hPURTGf5fkNUAodb0mBhh4DE0w072RgTzyzCNKCqVMPCdKiXQHXskrUQZMTCiiGGLgkQyIlMeAgSSP9NXat+N2zv/sc/be/d06e3jO3mt/31prf3vt1UE/Hx39HD8NgXZHsIlAE4FADzQpFOjA4OWxIjAQ2A+sASaWoPoAnAX2AL9DGcQgIPBXgCUVwdwCuoGfFdf9Mz2UwADgag3wDoRILAR+1CURQkDgLwAr625u6+4CC+qSaEVgMDADGFYAcD2wOhC8Wy4SBwpsfQSeFe1TRKALuAyMiAQw1MwDYDdwv6+hPAITgJfAkNBdI6//BkwF3mbt5hHYDJyIvHkdc8+BbaZUO8yAsJ0qIyA931dnRzuIZ0xWFfY/wEhgGjAfWAFM97StMyEscvIvQKLhvvWayItAXQICvAx41wKg9tOc48DYEiI6vOtMSA7Z3GQEbgKL7GaVx9cCi4F5Gam8DpwHvgDjgNsVouG4JiHw2VLkEzATuGNpk+dggVcqPQYkFo+A0Z4ppWlJCCy327gMvMOZJbEV6GkngfdAZyZN5nqC0cWlSAwCFDnf+yZ6BCRpkjZ5X+lQZcyyVFIttdRzYXQC0udjJndVpdet3QUcbhcB1f8XaxJw3pQNqZPPiB6BncDRQAKyccQHfQoVOglsCTwDurk3tIuAbl3pucZrYJInkCdGWiqkJ+Yoz3XRU0j76lmom7iKEjkFUrGmssJ3JCGgx8ZsK+RUu0iVinT9K7AdOAeMAV78DzexvHcN0I2sLsNkO9SqhRwRAVctpEJRqaZGwA2Lnq/3k5USDkBeNarCTkPlgxvjrfSYUwW5zU2SQlkc6i6ctvfAQ3sP6L9qeQFWlDYCem/XGckJZEF9B17ZhymRnqheBPa26BDU8VrMNSpXDmYN5r3IVll5EHPjWLbUxrlURmA48LTCpRQLXJmdN/aCU3eidxT1hdSgVZmg+n5omeXE/3WW7gGb+rZUtG9IazExbj/zDQE/P6Wb1UQgnW/9LDcR8PNTullNBNL51s/yX/qboDFMlgH6AAAAAElFTkSuQmCC) no-repeat;background-size:100% auto;background-position:2px 13px;float:left;background-position-y:center;margin-left:10px}.logo_title{display:inline-block;height:50px;line-height:54px;margin-left:12px;font-size:14px}.logo_text{display:inline-block;height:50px;line-height:54px;margin-left:12px;float:right;margin-right:12px;font-size:13px}.logo_text a{color:#333}.profile{float:right}.scrollup{position:fixed;cursor:-webkit-grab;z-index:999;transition:-webkit-transform .4s cubic-bezier(.4,0,0,1)}.loading{position:fixed;width:60px;height:60px;left:50%;top:50%;margin-left:-30px;margin-top:-30px}.double-bounce1,.double-bounce2{width:100%;height:100%;border-radius:50%;background-color:#deecff;opacity:.6;position:absolute;top:0;left:0;-webkit-animation:bounce 2s infinite ease-in-out;animation:bounce 2s infinite ease-in-out}.double-bounce2{-webkit-animation-delay:-1s;animation-delay:-1s}@-webkit-keyframes bounce{0%,100%{-webkit-transform:scale(0)}50%{-webkit-transform:scale(1)}}@keyframes bounce{0%,100%{transform:scale(0);-webkit-transform:scale(0)}50%{transform:scale(1);-webkit-transform:scale(1)}}@keyframes shine{0%{background-position:-1000px 0}100%{background-position:1000px 0}}</style><body><div class="main"><header class="header" style="display:none"><div class="logo"><div class="logo_img"></div><span class="logo_title">| 咔嚓</span></div></header><div class="gallery"><div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div></div></div><div id="mask" style="position:fixed;display:none;top:0;left:0;right:0;bottom:0;opacity:1;z-index:998;background-color:#fff;transition:opacity .4s cubic-bezier(.4,0,0,1)"></div><script type="text/javascript" src="//cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script><script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.7.3/dist/av-min.js"></script><script type="text/javascript">const logger = console;    
    var { Query, User } = AV;
    AV.init('bUTfY8SwOBitSS8uqiV0vG0I-gzGzoHsz', 'N6bRxFzuVXEBBdX96fGb1i4e');    
    let deffer = $.Deferred();
    let photoQuery = new AV.Query('Photo');
    let widthChange = false, heightChange = false;
    let originWidth = 0, originHeight = 0;
    let page = {
      init () {
        page.load(0, 20);
        page.bind();
      },
      load (start, limit) {         
        photoQuery.descending('name');
        photoQuery.skip(start);
        photoQuery.limit(limit);        
        photoQuery.find().then((photos) => {
          let arr = [];
          photos.forEach(item => {
            arr.push({
              name: item.attributes.name,
              url: item.attributes.url
            });
          })          
          page.renderImg(arr)
        }, (err) => {
        });
      },
      bind() {
        $(document).on('click', '.gallery-img', function() {
          if($(this).hasClass('scrollup')) return;
          originWidth = $(this).width();
          originHeight = $(this).height(); 
          $(this).addClass('scrollup');
          $('#mask').css('display', 'block');
          let imgRatio = originWidth / originHeight;
          let winRatio = $(window).width() / $(window).height();
          let ratio = 1;
          if(imgRatio >= winRatio) {
            widthChange = true;            
            ratio = $(window).width() / originWidth;            
            $(this).css('width', '100%');
            $(this).css('left', 0);
            $(this).css('top', '50%');
            $(this).css('margin-top', - (ratio * originHeight/2));
          } else {
            heightChange = true;                       
            ratio = $(window).height() / originHeight;
            $(this).css('height', '100%');
            $(this).css('top', 0);
            $(this).css('left', '50%');
            $(this).css('margin-left', - (ratio * originWidth/2));
          }
          // $(this).css('transform', 'scale(' + ratio + ')');
        })
        .on('click', '#mask, .scrollup', () => {
          $('#mask').css('display', 'none');
          if(widthChange) {
            widthChange = false;
            $('.scrollup').css('width', originWidth).css('margin-top', 0);
          } else {
            heightChange = false;
            $('.scrollup').css('height', originHeight).css('margin-left', 0);
          }
          $('.scrollup').removeClass('scrollup');
        })
      },
      renderImg (photos) {
        let gallery = '';
        photos.forEach(photo => {
          let title = page.formatTime(photo.name);
          let name = page.formatName(photo.name);
          gallery += `
            <div class="image_box">
              <div class="title">
                <h4 class="subtitle">${title}</h4>
                <h3 class="p_desc">${name}</h4>
              </div>
              <div class="img-wrap">
                <img class="gallery-img" src="${photo.url}" />
              </div>              
            </div>
          `
        })
        setTimeout(() => {
        $('.header').css('display', 'block');
        $('.gallery').html(gallery);
        }, 1000);
      },
      formatTime (timeStr) {
        let str = timeStr.split('_')[0];
        let arr = str.split('-');
        return `${arr[1]}月 ${arr[2]}日, ${arr[0]}年`
      },
      formatName (str) {
        let tmp = str.split('.')[0];
        return tmp.split('_')[1];
      }
    }
    page.init();</script><script type="text/javascript">var cnzz_protocol="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cspan id='cnzz_stat_icon_1274080808'%3E%3C/span%3E%3Cscript src='"+cnzz_protocol+"s13.cnzz.com/z_stat.php%3Fid%3D1274080808%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"))</script></body></html><!-- rebuild by neat -->