<!-- build time:Mon Jul 09 2018 09:51:47 GMT+0800 (CST) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="boxi"><title>ios证书制作与打包发布 · boxi's box</title><meta name="description" content="苹果的证书多样纷杂，且打包审核的过程严格复杂，各种身份验证，证书验证的操作相信已经把许多人搞晕，包括本人在内，最近一个项目需要打包上线，却因为这些非技术问题而把原计划拖延许久。看来记录笔记刻不容缓。(多图慎点)1. 生成CSR文件CSR文件，全称CertificateSigningRequest，由"><meta name="keywords" content="技术积累, 生活感悟"><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/img/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/img/logo@2x.png" style="width:150px"><h3><a href="/">boxi's box</a></h3><div class="description"><p>Poor Guy In Shenzhen</p></div></div></div><ul class="social-links"><li><a href="http://weibo.com/2263667870"><i class="fa fa-weibo"></i></a></li><li><a href="http://facebook.com/boxi.zeng"><i class="fa fa-facebook"></i></a></li><li><a href="http://github.com/boxizen"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me">CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben </a><span>Edit by</span><a href="https://github.com/boxizen"> Boxi</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"></a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>ios证书制作与打包发布</a></h3></div><div class="post-content"><blockquote><p>苹果的证书多样纷杂，且打包审核的过程严格复杂，各种身份验证，证书验证的操作相信已经把许多人搞晕，包括本人在内，最近一个项目需要打包上线，却因为这些非技术问题而把原计划拖延许久。看来记录笔记刻不容缓。(<strong>多图慎点</strong>)</p></blockquote><h3 id="1-生成CSR文件"><a href="#1-生成CSR文件" class="headerlink" title="1. 生成CSR文件"></a>1. 生成CSR文件</h3><p>CSR文件，全称CertificateSigningRequest，由本地生成，为请求苹果开发证书所用，操作流程如下：</p><p>在spotlight中搜索keychain,默认是第一条记录，点击打开钥匙串访问:<br><img src="/img/posts/apple/spotlight.png" alt="spotlight"></p><p>在钥匙串访问中选：择证书助理 －&gt; 从证书颁发机构请求证书:<br><img src="/img/posts/apple/keychain.png" alt="钥匙串访问"></p><p>填写邮箱信息并把CSR文件保存到磁盘:<br><img src="/img/posts/apple/csr.png" alt="CSR文件"></p><p>最终生成如下所示的CSR文件，该文件将用于向苹果开发者后台请求cer证书:<br><img src="/img/posts/apple/csrfile.png" alt="CSR文件" style="width:120px"></p><h3 id="2-创建开发者证书"><a href="#2-创建开发者证书" class="headerlink" title="2. 创建开发者证书"></a>2. 创建开发者证书</h3><p>苹果开发者证书分为两种：开发版与发布版，对于仅需要开发测试的应用，可以申请开发版证书，而对于要打包并发布到苹果商城中的应用，则必须选择发布版证书，需要注意的是一个账号只能申请三张发布版的证书，证书的有限性意味着多个苹果应用可能共用一张发布证书。</p><p>进入苹果开发者证书管理后台，点击左侧Certificate选项，选择自己需要的证书类型(开发/发布)，如图所示:</p><p><img src="/img/posts/apple/certificate.png" alt="开发证书"></p><p>点击右上方”+”创建证书,由于发布证书已达三个数量上限，为了演示方便这里选择了开发版的证书创建:<br><img src="/img/posts/apple/certificate_1.png" alt="开发证书"></p><p>点击下一步，上传CSR文件，也就是上面我们在本地所创建的文件:<br><img src="/img/posts/apple/certificate_2.png" alt="开发证书"></p><p>上传完成后可获得开发者证书，下载该证书并双击添加到本地证书中:<br><img src="/img/posts/apple/certificate_3.png" alt="开发证书"></p><h3 id="3-创建App-ID"><a href="#3-创建App-ID" class="headerlink" title="3. 创建App ID"></a>3. 创建App ID</h3><p>在Apple Store中，每一个程序应用对应于一个App ID，所以在应用发布前需要在苹果的开发者后台创建一个App ID，流程如下：</p><p>进入苹果开发者证书管理后台，点击左侧App ID选项，如图所示:<br><img src="/img/posts/apple/appidview.png" alt="App ID界面预览"></p><p>点击右上角的“＋”，新建App ID，此处需要注意的就是Bundle ID必须填写完整的包名:<br><img src="/img/posts/apple/appid_create_1.png" alt="App ID界面预览"></p><p>由于我的应用拥有推送的功能，所以需要在下方为Push Notifications打勾:<br><img src="/img/posts/apple/appid_create_2.png" alt="App ID界面预览"></p><p>不断下一步之后可完成App ID的创建，由于刚刚激活了主动推送的功能，所以这里还需要完成配置的操作，在App ID列表中点击刚刚创建的App ID，可看到Push Notifications状态如下：<br><img src="/img/posts/apple/push_notification.png" alt="主动推送"></p><h3 id="4-激活主动推送功能"><a href="#4-激活主动推送功能" class="headerlink" title="4. 激活主动推送功能"></a>4. 激活主动推送功能</h3><p>点击“Edit”对主动推送功能进行激活，如下图所示:<br><img src="/img/posts/apple/push_notification_1.png" alt="主动推送"></p><p>点击”create Certificate”按钮，上传我们在第一步中所创建的CSR文件:<br><img src="/img/posts/apple/push_notification_2.png" alt="主动推送"></p><p>不断下一步以完成了推送功能的配置，这时候可将推送功能的证书notification_push.cer下载到本地，如下图：<br><img src="/img/posts/apple/push_notification_3.png" alt="主动推送"></p><p>双击程序，将证书安装添加至本地中：<br><img src="/img/posts/apple/push_notification_4.png" alt="主动推送" style="width:120px"></p><h3 id="5-导出p12文件"><a href="#5-导出p12文件" class="headerlink" title="5. 导出p12文件"></a>5. 导出p12文件</h3><p>每一个带密钥的证书都可以导出p12文件，这是一个加密的文件，只要知道其密码，就可以在其他设备上使用，在钥匙串访问中右键点击刚刚添加的主动推送证书，选择“导出…”<br><img src="/img/posts/apple/push_notification_5.png" alt="p12文件导出"></p><p>以p12格式进行文件导出:<br><img src="/img/posts/apple/push_notification_6.png" alt="p12文件导出"></p><p>输入p12的密码:<br><img src="/img/posts/apple/push_notification_7.png" alt="p12文件导出"></p><p>下面就是导出后的文件:<br><img src="/img/posts/apple/push_notification_8.png" alt="p12文件导出" style="width:120px"></p><h3 id="6-生成Provisioning-Profiles"><a href="#6-生成Provisioning-Profiles" class="headerlink" title="6. 生成Provisioning Profiles"></a>6. 生成Provisioning Profiles</h3><p>Provisioning Profiles，简称PP文件，该文件将appID，开发者证书，硬件Device绑定在一起，在开发者中心配置好后可以添加到Xcode上，也可以直接在Xcode上连接开发者中心生成，真机调试时需要在PP文件中添加真机的udid，由于此处配置的是发布版本的PP文件，所以没有了添加真机udid这一步骤。</p><p>点击开发者中心的Provisioning Profiles，选择Distribution，如下:<br><img src="/img/posts/apple/provision.png" alt="provisioning"></p><p>点击右上方”+”,选择自己需要的版本进行配置，由于要在商城发布，这里我选择的是App Store:<br><img src="/img/posts/apple/provision_1.png" alt="provisioning"></p><p>下一步选择需要配置的AppId:<br><img src="/img/posts/apple/provision_2.png" alt="provisioning"></p><p>下一步选择开发证书:<br><img src="/img/posts/apple/provision_3.png" alt="provisioning"></p><p>填写provision profile的名字，完成配置:<br><img src="/img/posts/apple/provision_4.png" alt="provisioning"></p><p>配置成功后下载PP文件,如下图:<br><img src="/img/posts/apple/provision_5.png" alt="provisioning"></p><p><img src="/img/posts/apple/provision_6.png" alt="provisioning" style="width:120px"></p><p>至此，苹果打包所需的所有证书已经准备完毕。</p><h3 id="6-Xcode打包生成ipa"><a href="#6-Xcode打包生成ipa" class="headerlink" title="6. Xcode打包生成ipa"></a>6. Xcode打包生成ipa</h3><p>前序的准备工作上面已经详细介绍，真是呕心沥血啊… 废话少说，直接进入主题</p><p>打开Xcode，选择需要打包的项目，然后执行 Product -&gt; Scheme -&gt; Edit Scheme<br><img src="/img/posts/apple/xcode.png" alt="xcode"></p><p>把Build Configuration改为Release，如下图:<br><img src="/img/posts/apple/xcode_2.png" alt="xcode"></p><p>完成上述操作后执行 Product -&gt; Archieve<br><img src="/img/posts/apple/xcode_3.png" alt="xcode"></p><p>选择导出的用途后点击export按钮:<br><img src="/img/posts/apple/xcode_4.png" alt="xcode"></p><p>在此过程会有一个签名自动验证的过程，此处略过许多坑…历经千辛，排除万难，终于打包成功:<br><img src="/img/posts/apple/xcode_5.png" alt="xcode" style="width:120px"></p><p>如果你认为，只要按上述步骤完成就可以成功打包，那真是天真了…在整个过程中可以会遇到许多的问题，这里就不一一描述了。</p></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2015-07-04</span><i class="fa fa-tag"></i><a class="tag" href="/categories/ios/" title="ios">ios </a><a class="tag" href="/tags/证书-apple/" title="证书 apple">证书 apple</a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,http://yoursite.com/2015/07/04/ios_cer/,boxi's box,ios证书制作与打包发布,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2015/12/25/http_protocol/" title="图解HTTP 学习笔记">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2015/05/03/mui/" title="MUI -- 移动页面开发利器">下一篇</a></li></ul></div><a id="comments"></a><div id="vcomments" style="margin:0 30px"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/gh/xcss/valine@v1.1.7/dist/Valine.min.js?v=undefined"></script><script>var valine=new Valine({el:"#vcomments",notify:!0,verify:!1,app_id:"bUTfY8SwOBitSS8uqiV0vG0I-gzGzoHsz",app_key:"N6bRxFzuVXEBBdX96fGb1i4e",placeholder:"来，一起快活",path:window.location.pathname,avatar:"monsterid"})</script></div></div></div></div><script src="https://cdn.bootcss.com/jquery/1.9.0/jquery.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script type="text/javascript">var cnzz_protocol="https:"==document.location.protocol?" https://":" http://";document.write(unescape("%3Cspan id='cnzz_stat_icon_1274080808'%3E%3C/span%3E%3Cscript src='"+cnzz_protocol+"s13.cnzz.com/z_stat.php%3Fid%3D1274080808%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"))</script><script type="text/javascript">var ifm=document.getElementById("iframe");ifm&&($(window).width()>500?ifm.height=document.documentElement.clientHeight-250||400:ifm.height=200)</script></body></html><!-- rebuild by neat -->